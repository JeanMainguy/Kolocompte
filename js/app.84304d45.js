(function(e){function t(t){for(var s,o,c=t[0],i=t[1],m=t[2],b=0,u=[];b<c.length;b++)o=c[b],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&u.push(r[o][0]),r[o]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);l&&l(t);while(u.length)u.shift()();return a.push.apply(a,m||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],s=!0,c=1;c<n.length;c++){var i=n[c];0!==r[i]&&(s=!1)}s&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var s={},r={app:0},a=[];function o(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=s,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/Kolocompte/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var m=0;m<c.length;m++)t(c[m]);var l=i;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"09d0":function(e,t,n){},"2e7b":function(e,t,n){},"491b":function(e,t,n){"use strict";n("4cdc")},"4cdc":function(e,t,n){},"4f1c":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("7a23"),r={class:"center"},a={class:"container"},o={class:"container"},c=Object(s["e"])("div",{class:"center"},null,-1),i={class:"center"},m={class:"container"},l=Object(s["e"])("div",{class:"center"},null,-1),b={class:"container"};function u(e,t,n,u,d,p){var f=Object(s["n"])("Header"),h=Object(s["n"])("AddMember"),j=Object(s["n"])("Member"),O=Object(s["n"])("Button"),_=Object(s["n"])("Balance"),v=Object(s["n"])("Transactions");return Object(s["j"])(),Object(s["d"])(s["a"],null,[Object(s["e"])("div",r,[Object(s["g"])(f,{title:"Kolocompte"})]),Object(s["e"])("div",a,[Object(s["g"])(f,{title:"Qui habite la maison?"}),Object(s["g"])(h,{onRemoveMember:p.removeMemberName,onAddMember:p.addMemberName,member_names:d.member_names},null,8,["onRemoveMember","onAddMember","member_names"])]),Object(s["e"])("div",o,[Object(s["g"])(f,{title:"Dépenses"}),(Object(s["j"])(!0),Object(s["d"])(s["a"],null,Object(s["m"])(this.members,(function(e){return Object(s["j"])(),Object(s["d"])("div",{class:"member",key:e.id},[Object(s["g"])(j,{onHideAll:p.hideAllMemberInfo,onExpandInfo:p.expandMemberInfo,onUpdateMember:p.updateMember,member:e},null,8,["onHideAll","onExpandInfo","onUpdateMember","member"])])})),128)),c,Object(s["e"])("div",i,[Object(s["g"])(O,{onBtnClick:p.ClearAllMembers,color:"#DC143C",text:"Effacer toutes les dépenses"},null,8,["onBtnClick"])])]),Object(s["e"])("div",m,[Object(s["g"])(f,{title:"Balance"}),Object(s["g"])(_,{members:d.members},null,8,["members"]),l]),Object(s["e"])("div",b,[Object(s["g"])(f,{title:"Comment équilibrer?"}),Object(s["g"])(v,{transactions:d.transactions},null,8,["transactions"])])],64)}var d=n("5530"),p=n("2909");n("a9e3"),n("d81d"),n("d3b7"),n("e9c4"),n("b0c0"),n("4de4"),n("caad"),n("2532"),n("99af"),n("c740"),n("a434"),n("35b3"),n("4e82"),n("33d1"),n("ea98"),n("b64b");function f(e,t,n,r,a,o){return Object(s["j"])(),Object(s["d"])("header",null,[Object(s["e"])("h1",null,Object(s["o"])(n.title),1)])}var h={name:"Header",props:{title:String},components:{}},j=(n("e291"),n("6b0d")),O=n.n(j);const _=O()(h,[["render",f],["__scopeId","data-v-6be8725a"]]);var v=_,x=Object(s["e"])("i",{class:"expense_sum fa-solid fa-house"},null,-1),g=Object(s["e"])("i",{class:"expense_sum fa-solid fa-pizza-slice"},null,-1),M=Object(s["e"])("i",{class:"expense_sum fa-solid fa-arrow-right-from-bracket"},null,-1),y=Object(s["e"])("i",{class:"expense_sum fa-solid fa-angle-down"},null,-1),w={key:0},k=Object(s["f"])(" Absent "),E=Object(s["f"])(" semaines ");function A(e,t,n,r,a,o){var c=this,i=Object(s["n"])("Expenses");return Object(s["j"])(),Object(s["d"])(s["a"],null,[Object(s["e"])("div",{class:"member",onDblclick:t[0]||(t[0]=function(t){return e.$emit("hide-all")}),onClick:t[1]||(t[1]=function(t){return e.$emit("expand-info",c.member.id)})},[Object(s["e"])("h3",null,[Object(s["f"])(Object(s["o"])(this.member.name),1),x,Object(s["f"])(" "+Object(s["o"])(this.member.house_expense_sum)+"€ ",1),g,Object(s["f"])(" "+Object(s["o"])(this.member.food_expense_sum)+"€ ",1),M,Object(s["f"])(" "+Object(s["o"])(this.member.week_away)+"/4 ",1),y])],32),this.member.showExpenses?(Object(s["j"])(),Object(s["d"])("div",w,[Object(s["g"])(i,{onUpdateMember:o.updateMember,member:this.member,type:"house_expenses"},null,8,["onUpdateMember","member"]),Object(s["g"])(i,{onUpdateMember:o.updateMember,member:this.member,type:"food_expenses"},null,8,["onUpdateMember","member"]),Object(s["e"])("div",null,[k,Object(s["e"])("button",{class:"btn",onClick:t[2]||(t[2]=function(e){return o.dec()})},"-"),Object(s["f"])(" "+Object(s["o"])(this.member.week_away)+" ",1),Object(s["e"])("button",{class:"btn",onClick:t[3]||(t[3]=function(e){return o.inc()})},"+"),E])])):Object(s["c"])("",!0)],64)}var S={class:"member"},N=["onClick"];function I(e,t,n,r,a,o){var c=Object(s["n"])("AddExpense");return Object(s["j"])(),Object(s["d"])("div",S,[(Object(s["j"])(!0),Object(s["d"])(s["a"],null,Object(s["m"])(n.member[n.type],(function(e){return Object(s["j"])(),Object(s["d"])("li",{class:"expense",key:e},[Object(s["e"])("h3",null,[Object(s["f"])(Object(s["o"])(e)+" ",1),Object(s["e"])("i",{onClick:function(t){return o.deleteValue(e)},class:"fas fa-times"},null,8,N)])])})),128)),Object(s["g"])(c,{onAddValue:o.addValue,label:"food_expenses"==n.type?"Nourriture":"Charges"},null,8,["onAddValue","label"])])}var C=function(e){return Object(s["l"])("data-v-763ba10d"),e=e(),Object(s["k"])(),e},B={class:"form-control"},D=C((function(){return Object(s["e"])("br",null,null,-1)}));function V(e,t,n,r,a,o){return Object(s["j"])(),Object(s["d"])("form",{onSubmit:t[1]||(t[1]=function(){return o.onSubmit&&o.onSubmit.apply(o,arguments)}),class:"add-form",target:"#here"},[Object(s["e"])("div",B,[Object(s["e"])("label",null,Object(s["o"])(this.label),1),Object(s["q"])(Object(s["e"])("input",{class:"member",name:"expense_value",step:"0.01",type:"number",placeholder:"Nouvelle dépense","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.expense_value=e})},null,512),[[s["p"],a.expense_value]]),D])],32)}var P={name:"AddExpense",data:function(){return{expense_value:""}},props:{label:String},methods:{onSubmit:function(e){e.preventDefault(),console.log("VALUE",this.expense_value),this.$emit("add-value",Number(this.expense_value)),this.expense_value=""}}};n("491b");const U=O()(P,[["render",V],["__scopeId","data-v-763ba10d"]]);var $=U,L={name:"Expenses",props:{member:Object,type:String},data:function(){return{expenses:[],expense_sum:Number}},created:function(){},methods:{addValue:function(e){console.log("THIS EXPENSES",this.expenses),this.$emit("update-member",this.member.id,e,"add",this.type)},deleteValue:function(e){this.$emit("update-member",this.member.id,e,"remove",this.type)}},components:{AddExpense:$}};n("8c39");const W=O()(L,[["render",I]]);var T=W,H={name:"Member",props:{member:Object},emits:["update-member","hide-all","expand-info"],components:{Expenses:T},data:function(){return{showExpenses:!1}},methods:{updateMember:function(e,t,n,s){console.log("NEW EXPENSE",t),this.$emit("update-member",e,t,n,s)},inc:function(){this.$emit("update-member",this.member.id,1,"week_away")},dec:function(){this.$emit("update-member",this.member.id,-1,"week_away")}}};n("5986");const J=O()(H,[["render",A]]);var R=J;function z(e,t,n,r,a,o){return Object(s["j"])(),Object(s["d"])("button",{onClick:t[0]||(t[0]=function(e){return o.onClick()}),style:Object(s["i"])({background:n.color}),class:"btn"},Object(s["o"])(n.text),5)}var q={name:"Button",props:{text:String,color:String},methods:{onClick:function(){this.$emit("btn-click")}}};const G=O()(q,[["render",z]]);var K=G,X=Object(s["e"])("i",{class:"expense_sum fa-solid fa-house"},null,-1),F=Object(s["e"])("i",{class:"expense_sum fa-solid fa-pizza-slice"},null,-1);function Q(e,t,n,r,a,o){return Object(s["j"])(!0),Object(s["d"])(s["a"],null,Object(s["m"])(n.members,(function(e){return Object(s["j"])(),Object(s["d"])("div",{key:e.id},[Object(s["e"])("div",{class:Object(s["h"])([e.balance>=0?"positive":"negative","balance"])},[Object(s["f"])(Object(s["o"])(e.name)+" ",1),X,Object(s["f"])(" "+Object(s["o"])(o.roundWith2Decimal(e.house_balance))+"€ + ",1),F,Object(s["f"])(" "+Object(s["o"])(o.roundWith2Decimal(e.food_balance))+"€ = "+Object(s["o"])(o.roundWith2Decimal(e.balance))+"€ ",1)],2)])})),128)}var Y={name:"Balance",components:{},props:{members:Array},methods:{roundWith2Decimal:function(e){return Math.round(100*(e+Number.EPSILON))/100}}};n("eb71");const Z=O()(Y,[["render",Q]]);var ee=Z;function te(e,t,n,r,a,o){return Object(s["j"])(!0),Object(s["d"])(s["a"],null,Object(s["m"])(n.transactions,(function(e){return Object(s["j"])(),Object(s["d"])("div",{key:e.id},Object(s["o"])(e.from)+" doit à "+Object(s["o"])(e.to)+" "+Object(s["o"])(e.amount)+"€ ",1)})),128)}var ne={name:"Transactions",props:{transactions:Array},components:{},methods:{}};const se=O()(ne,[["render",te]]);var re=se,ae=function(e){return Object(s["l"])("data-v-1954d903"),e=e(),Object(s["k"])(),e},oe={class:"member"},ce=["onClick"],ie={class:"form-control"},me=ae((function(){return Object(s["e"])("label",null,"Nouveau coloc",-1)})),le=ae((function(){return Object(s["e"])("br",null,null,-1)}));function be(e,t,n,r,a,o){return Object(s["j"])(),Object(s["d"])("div",oe,[(Object(s["j"])(!0),Object(s["d"])(s["a"],null,Object(s["m"])(n.member_names,(function(e){return Object(s["j"])(),Object(s["d"])("li",{class:"expense",key:e},[Object(s["e"])("h3",null,[Object(s["f"])(Object(s["o"])(e)+" ",1),Object(s["e"])("i",{onClick:function(t){return o.deleteValue(e)},class:"fas fa-times"},null,8,ce)])])})),128)),Object(s["e"])("form",{onSubmit:t[1]||(t[1]=function(){return o.addMember&&o.addMember.apply(o,arguments)}),class:"add-form",target:"#here"},[Object(s["e"])("div",ie,[me,Object(s["q"])(Object(s["e"])("input",{class:"member",name:"name",type:"string",placeholder:"prénom du coloc","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.name=e})},null,512),[[s["p"],a.name]]),le])],32)])}var ue={name:"AddMember",data:function(){return{name:""}},props:{member_names:Array},methods:{addMember:function(e){e.preventDefault(),console.log("Add Name",this.name),this.$emit("add-member",String(this.name)),this.name=""},deleteValue:function(e){this.$emit("remove-member",e)}}};n("6015");const de=O()(ue,[["render",be],["__scopeId","data-v-1954d903"]]);var pe=de,fe={name:"App",components:{Header:v,Member:R,Button:K,Balance:ee,Transactions:re,AddMember:pe},data:function(){return{members:[],member_names:[],total_expenses:Number,total_weeks_spent:Number,total_food_expenses:Number,total_house_expenses:Number,sum_abs_balance:Number,transactions:[]}},methods:{updateAllMembers:function(){var e=this;console.log(this.members),this.members=this.members.map((function(t){return e.sumExpenses(t)})),this.total_house_expenses=this.members.map((function(e){return e.house_expense_sum})).reduce((function(e,t){return e+t})),this.total_food_expenses=this.members.map((function(e){return e.food_expense_sum})).reduce((function(e,t){return e+t})),this.total_expenses=this.total_house_expenses+this.total_food_expenses,this.total_weeks_spent=4*this.members.length-this.members.map((function(e){return e.week_away})).reduce((function(e,t){return e+t})),this.members=this.members.map((function(t){return e.computeBalance(t)})),this.solveBalance(),console.log("Write members value to local storage"),localStorage.setItem("members",JSON.stringify(this.members)),localStorage.setItem("names",JSON.stringify(this.member_names))},ClearAllMembers:function(){this.members=this.member_names.map((function(e,t){var n={id:t,name:e,food_expenses:[],house_expenses:[],expense_sum:0,balance:0,week_away:0,showExpenses:!1};return n})),this.updateAllMembers()},sumExpenses:function(e){return console.log(e),e.food_expense_sum=e.food_expenses.reduce((function(e,t){return e+t}),0),e.house_expense_sum=e.house_expenses.reduce((function(e,t){return e+t}),0),e.expense_sum=e.house_expenses.reduce((function(e,t){return e+t}),0),e},computeBalance:function(e){var t=e.house_expense_sum-this.total_house_expenses/this.members.length,n=e.food_expense_sum-(4-e.week_away)*(this.total_food_expenses/this.total_weeks_spent);return console.log("food per week and per personne",this.total_food_expenses/this.total_weeks_spent),console.log(e.name,"is out ",e.week_away,"/4 weeks and for food need to pay",n),e.balance=t+n,e.house_balance=t,e.food_balance=n,e},removeMemberName:function(e){console.log("REMOVE ",e),this.member_names=this.member_names.filter((function(t){return t!==e})),this.members=this.members.filter((function(t){return t.name!==e})),this.updateAllMembers()},addMemberName:function(e){if(!this.member_names.includes(e)){this.member_names=[].concat(Object(p["a"])(this.member_names),[e]);var t={id:this.member_names.indexOf(e),name:e,food_expenses:[],house_expenses:[],expense_sum:0,balance:0,week_away:0,showExpenses:!1};this.members=[].concat(Object(p["a"])(this.members),[t]),this.updateAllMembers()}console.log(this.member_names)},updateMember:function(e,t,n,s){if("add"==n)this.members[e][s]=[].concat(Object(p["a"])(this.members[e][s]),[t]);else if("remove"==n){var r=this.members[e][s].findIndex((function(e){return e==t}));this.members[e][s].splice(r,1)}else if("week_away"==n){var a=this.members[e].week_away;a+=t,a=-1==a?4:a,a%=5,this.members[e].week_away=Math.abs(a)}this.updateAllMembers()},roundWith2Decimal:function(e){return Math.round(100*(e+Number.EPSILON))/100},solveBalance:function(){this.transactions=[],this.members=this.members.map((function(e){return e.solved_balance=e.balance,e}));var e,t,n,s,r=Object(p["a"])(this.members);e=r.map((function(e){return e.solved_balance})).reduce((function(e,t){return Math.abs(e)+Math.abs(t)})),console.log("INITIAL SUM BALAnCE IS",e);var a=0;while(this.roundWith2Decimal(e)>0&&a<25)r=r.sort((function(e,t){return e.solved_balance>t.solved_balance?-1:1})),t=r.at(0),n=r.at(-1),Math.abs(n.solved_balance)>=t.solved_balance?(s=t.solved_balance,n.solved_balance=n.solved_balance+t.solved_balance,t.solved_balance=0):Math.abs(n.solved_balance)<t.solved_balance&&(s=Math.abs(n.solved_balance),t.solved_balance=n.solved_balance+t.solved_balance,n.solved_balance=0),s=this.roundWith2Decimal(s),this.transactions=[].concat(Object(p["a"])(this.transactions),[{from:n.name,to:t.name,amount:s,id:a}]),console.log(a,n.name,"gives",s,"to",t.name),e=r.map((function(e){return e.solved_balance})).reduce((function(e,t){return Math.abs(e)+Math.abs(t)})),a+=1;console.log("DONE RESOLVING... with ",a,"operation")},hideAllMemberInfo:function(){console.log("HIDE ALL INFO"),this.members=this.members.map((function(e){return Object(d["a"])(Object(d["a"])({},e),{},{showExpenses:!1})}))},expandMemberInfo:function(e){this.members[e].showExpenses=!this.members[e].showExpenses}},created:function(){this.total_expenses=0,this.total_weeks_spent=0,this.member_names=[],this.members=[]},mounted:function(){console.log("GET MEMBERS VALUE from local storage"),this.members=JSON.parse(localStorage.getItem("members"))||[],this.member_names=this.members.map((function(e){return e.name})),0===Object.keys(this.members).length&&this.ClearAllMembers(),console.log(this.members),this.hideAllMemberInfo(),this.updateAllMembers()}};n("bb4a");const he=O()(fe,[["render",u]]);var je=he;Object(s["b"])(je).mount("#app")},5986:function(e,t,n){"use strict";n("8fa7")},6015:function(e,t,n){"use strict";n("09d0")},"8c39":function(e,t,n){"use strict";n("c103")},"8c5c":function(e,t,n){},"8fa7":function(e,t,n){},bb4a:function(e,t,n){"use strict";n("8c5c")},c103:function(e,t,n){},e291:function(e,t,n){"use strict";n("2e7b")},eb71:function(e,t,n){"use strict";n("4f1c")}});
//# sourceMappingURL=app.84304d45.js.map